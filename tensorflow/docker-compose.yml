version: '3.3'
# created from https://hub.docker.com/r/tensorflow/tensorflow/
services:
  tensorflow:
    image: tensorflow/tensorflow:latest-py3-jupyter
    container_name: tensorflow-py3-jupyter
    volumes:
      - data:/tf/notebooks
      #- ${HOME}:/tf/home
    ports:
      - 8888:8888
    # note: distribution runs as root which is frowned upon
    # note: bash is in /bin instead of /usr/bin as of 2019/12
    #entrypoint: ["/usr/bin/bash" ,"-c", "/opt/conda/bin/conda install jupyter -y --quiet && mkdir /opt/notebooks && /opt/conda/bin/jupyter notebook --notebook-dir=/opt/notebooks --ip='*' --port=8888 --allow-root --no-browser"]
    #entrypoint: ["/bin/bash" ,"-c", "/opt/conda/bin/conda install jupyter -y --quiet && /opt/conda/bin/jupyter notebook --notebook-dir=/opt/notebooks --ip='*' --port=8888 --allow-root --no-browser"]
    networks:
      - private_net

volumes:
  # will be <service_name>_data_1
  data:
    driver: local

# the actual name will be <directory_name>_<network_name>
networks:
  private_net:
    driver: bridge
